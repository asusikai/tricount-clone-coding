{
  "master": {
    "tasks": [
      {
        "id": "1",
        "title": "프로젝트 초기 세팅 및 네비게이션 스캐폴딩",
        "description": "Flutter 3.24.3/Dart 3.5.2 기준 앱 부팅/환경 분리/Supabase 초기화/기본 페이지와 하단 탭(IndexedStack) 구조를 스캐폴딩합니다.",
        "details": "- pubspec.yaml 의존성(예시): supabase_flutter:^2, flutter_dotenv, intl, uni_links, share_plus, freezed, json_serializable, build_runner.\n- .env(.gitignore): SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_REDIRECT_URI.\n- iOS/Android URL Scheme: splitbills://invite.\n- main.dart 의사코드:\n  void main() async {\n    WidgetsFlutterBinding.ensureInitialized();\n    await dotenv.load(fileName: \".env\");\n    await Supabase.initialize(\n      url: dotenv.env['SUPABASE_URL']!,\n      anonKey: dotenv.env['SUPABASE_ANON_KEY']!,\n    );\n    runApp(const App());\n  }\n  class App extends StatelessWidget { ... MaterialApp(home: SplashPage()) }\n- 하단 탭: Groups/Requests/Profile, IndexedStack으로 상태 유지.\n- SplashPage→AuthPage/HomePage 라우팅 뼈대만 먼저 구성.",
        "testStrategy": "- flutter analyze 통과.\n- DEV/PROD 환경에서 Supabase.initialize 성공/실패 분기 테스트.\n- IndexedStack 탭 전환 시 스크롤/상태 유지 수동 확인.",
        "priority": "medium",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Android/iOS URL 스킴을 splitbills://invite로 통일하고 딥링크 라우팅 갱신",
            "description": "현재 tricount 스킴을 요구사항 splitbills://invite로 변경하고 모든 플랫폼/라우팅 설정을 정리합니다.",
            "dependencies": [],
            "details": "AndroidManifest.xml 인텐트 필터를 splitbills://invite 로 교체하고 기존 tricount 필터 제거; iOS Info.plist URL Types에 splitbills 추가 및 기존 항목 정리; 앱 내 딥링크 파서에서 /invite 경로와 code 파라미터 파싱으로 통일; 라우터 매핑(Splash→Auth/Home 포함)에서 초대 진입 흐름 검증 및 잘못된 스킴 가드 추가.",
            "status": "done",
            "testStrategy": "Android: adb VIEW 인텐트로 splitbills://invite?code=ABC 테스트, 콜드/웜 스타트 모두 확인. iOS: Xcode URL Schemes로 동일 시나리오 검증. 잘못된 스킴/누락 파라미터 방어 동작 확인.",
            "parentId": "undefined",
            "updatedAt": "2025-11-05T15:45:25.714Z"
          },
          {
            "id": 2,
            "title": ".env 기반 환경 주입 확정 및 빌드 스크립트/CI 정리",
            "description": "flutter_dotenv 중심으로 환경 주입을 표준화하고 dev/prod 분리를 적용합니다.",
            "dependencies": [],
            "details": "pubspec에 flutter_dotenv 추가 및 .env/.env.dev/.env.prod 구성(.gitignore 포함); lib/config/environment.dart 래퍼 작성해 SUPABASE_URL/ANON_KEY/REDIRECT_URI 안전 로드; main.dart에서 dotenv.load→Supabase.initialize 적용; 로컬/CI에서 .env 주입 방식 문서화 및 GitHub Actions에서 Secrets로 .env 생성 단계 반영.",
            "status": "done",
            "testStrategy": "로컬에서 .env 정상/누락/오염 값 각각 실행해 초기화 성공/실패 분기 확인. flutter run, flutter build 환경별로 값이 반영되는지 로그로 검증.",
            "parentId": "undefined",
            "updatedAt": "2025-11-05T15:45:46.589Z"
          },
          {
            "id": 3,
            "title": "IndexedStack 탭 상태 유지 점검 및 Nested Navigator 도입 결정",
            "description": "하단 탭 전환 시 상태 유지와 올바른 뒤로가기 동작을 보장하고 필요 시 탭별 Navigator를 도입합니다.",
            "dependencies": [
              1,
              2
            ],
            "details": "현 Home/탭 구현을 점검해 IndexedStack이 스크롤/폼 상태를 유지하는지 확인; 부족 시 각 탭에 GlobalKey<NavigatorState> 기반 Nested Navigator + Offstage 구조로 리팩터링; PageStorageKey 적용, 안드로이드 뒤로가기 시 탭 내부 스택 우선 팝 처리; 딥링크로 특정 탭 진입 후 복귀 흐름 정합성 확보.",
            "status": "done",
            "testStrategy": "수동 시나리오: 각 탭에서 상세로 진입→탭 전환→복귀 시 스크롤/폼 값 유지 확인. 딥링크로 Requests 탭 진입 후 뒤로가기 동작 검증. 위젯 테스트로 탭 전환 후 상태 보존 여부 체크.",
            "parentId": "undefined",
            "updatedAt": "2025-11-07T03:48:54.207Z"
          },
          {
            "id": 4,
            "title": "flutter analyze 통과 및 부팅 실패/예외 핸들링 보강",
            "description": "정적 분석 경고를 정리하고 부팅 단계의 예외를 사용자 친화적으로 처리합니다.",
            "dependencies": [
              1,
              2,
              3
            ],
            "details": "main()에 runZonedGuarded와 FlutterError.onError 설정으로 로깅 일원화; dotenv.load와 Supabase.initialize try/catch 래핑 및 ErrorPage/Retry 제공; 딥링크 파싱 실패 시 토스트/스낵바와 안전한 홈 복귀 처리; flutter analyze/format 실행해 경고 제거 및 CI에 분석 스텝 추가.",
            "status": "done",
            "testStrategy": "flutter analyze가 0 exit를 반환하는지 확인. .env 누락/잘못된 키/네트워크 실패 등을 모킹해 ErrorPage 노출과 재시도 동작을 수동 검증. 딥링크 파싱 예외 시 앱이 크래시하지 않는지 확인.",
            "parentId": "undefined",
            "updatedAt": "2025-11-07T03:58:34.690900Z"
          }
        ],
        "complexity": 4,
        "recommendedSubtasks": 4,
        "expansionPrompt": "레포의 현재 구현을 기준으로 다음을 정렬하세요: 1) URL 스킴 통일(요구사항 splitbills://invite vs 현재 tricount://group/join) 및 플랫폼 설정 갱신, 2) 환경 주입 전략 확정(.env/flutter_dotenv vs 현재 --dart-define)과 빌드 스크립트, 3) IndexedStack+탭 유지 구조 검증 및 Nested Navigator 필요 시 도입, 4) flutter analyze 및 기본 부팅 실패/예외 핸들링 보강.",
        "updatedAt": "2025-11-07T03:58:34.690900Z"
      },
      {
        "id": "2",
        "title": "OAuth 인증 플로우(Supabase Auth) 구현",
        "description": "Google/Apple/Kakao OAuth를 Supabase Auth로 연동하고 Splash→Auth/Home 라우팅을 완성합니다.",
        "details": "- SplashPage: 최상단에서 supabase.auth.currentSession 확인, onAuthStateChange 구독→세션 생성/만료 라우팅.\n- AuthPage: 튜토리얼 카드 + 버튼 3종.\n- 로그인 의사코드:\n  final resp = await supabase.auth.signInWithOAuth(\n    Provider.google,\n    redirectTo: dotenv.env['SUPABASE_REDIRECT_URI'],\n  );\n  if (resp.session != null) context.go('/home');\n- Apple은 iOS 전용 가드; Kakao는 Supabase Custom Provider 설정(redirect URI만) 사용.\n- 최초 로그인 시 users 테이블에 최소 정보 upsert(없으면 insert).",
        "testStrategy": "- 세션 null/존재 라우팅 단위/위젯 테스트.\n- OAuth 실패/취소/재시도 UX 확인(모킹).\n- users upsert 호출 파라미터/예외 로깅 검증.",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 4,
        "recommendedSubtasks": 4,
        "expansionPrompt": "1) 기존 PKCE 콜백 처리(main.dart _handleAuthCallback)와 라우팅 재확인, 2) Kakao/Apple/Google 각각 redirect URI/스킴 일치 점검 및 오류 UX 스낵바 표준화, 3) users upsert 후 오류 로깅/리커버리 정리, 4) 세션 만료/로그아웃 후 재로그인 경계 케이스 보강(재시도 딜레이/flow state)."
      },
      {
        "id": "3",
        "title": "데이터 모델 및 리포지토리 레이어 구축",
        "description": "PRD 스키마(users, groups, members, expenses, settlements, exchange_rates)를 기준으로 DTO와 Supabase CRUD 리포지토리를 작성합니다.",
        "details": "- freezed/json_serializable로 모델 정의(테이블 필드명 준수: groups.base_currency 포함).\n- 예시 모델:\n  @freezed class Group with _$Group { factory Group({required String id, required String name, required String inviteCode, required String baseCurrency}) = _Group; factory Group.fromJson(Map<String,dynamic> json)=>_$GroupFromJson(json); }\n- 리포지토리 예시:\n  class GroupRepository { final SupabaseClient client; Future<List<Group>> byUser(String uid) async => (await client.from('groups').select().then(...)).map(Group.fromJson).toList(); Future<Group> create(String name,String cur) async => client.from('groups').insert({'name':name,'base_currency':cur}).select().single().then(Group.fromJson); }\n- 에러를 AppException으로 래핑해 호출부 단순화.",
        "testStrategy": "- JSON 직렬화/역직렬화 라운드트립 테스트.\n- CRUD 메서드 시그니처/에러 분기 단위 테스트(HTTP/Supa 모킹).",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 7,
        "recommendedSubtasks": 7,
        "expansionPrompt": "1) freezed/json_serializable 및 build_runner 파이프라인 추가, 2) DTO 정의(users, groups(base_currency), members, expenses(participants[]), settlements, exchange_rates), 3) Map 기반 서비스(Group/Request)→타입 안전 리포지토리로 마이그레이션, 4) 공통 AppException/Result 도입, 5) 직렬화 라운드트립/널세이프티 테스트, 6) 생성 코드 스크립트/ignore 정리, 7) 단계적 치환(컴파일 안전 보장)."
      },
      {
        "id": "4",
        "title": "그룹 생성/목록/상세(UI) 구현",
        "description": "그룹 생성(name, base_currency)과 목록/상세(GroupPage) UI, 기본 상태관리 및 새로고침을 구현합니다.",
        "details": "- 그룹 생성 다이얼로그→GroupRepository.create 호출→성공 시 리스트 갱신.\n- GroupPage: 상단 잔액/지출 섹션, 날짜/사용자별 필터 탭(간단 리스트 구현).\n- 초대 코드(invite_code)는 DB 트리거/함수 생성 가정: insert 결과에 포함.\n- 통화 포맷: intl NumberFormat.currency(locale/currency 코드 활용).",
        "testStrategy": "- 생성 폼 검증(이름/통화 필수) 위젯 테스트.\n- 생성 후 목록 반영/스낵바 확인.\n- 빈 상태/에러 상태 화면 처리 확인.",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 5,
        "recommendedSubtasks": 5,
        "expansionPrompt": "1) GroupPage 스켈레톤(지출/잔액 섹션, 필터 탭) 신규, 2) GroupCreatePage 완료 후 목록 갱신/스낵바 흐름 정제, 3) 상태관리(현재 로컬 setState→Provider/캐시) 정리, 4) 빈/에러/로딩 상태 UX 보강, 5) 통화 표기(intl) 유틸 도입 및 적용."
      },
      {
        "id": "5",
        "title": "딥링크 초대 처리 및 자동 가입",
        "description": "초대 링크(splitbills://invite?code=XXXX) 공유/열기 처리와 자동 가입(RPC)을 구현합니다.",
        "details": "- 링크 생성: 초대 공유 시 `splitbills://invite?code=$inviteCode`를 share_plus로 공유.\n- 수신: uni_links로 getInitialLink()/linkStream 처리, Uri.parse로 code 추출.\n- 가입 의사코드:\n  final code = uri.queryParameters['code'];\n  await supabase.rpc('rpc_create_invite', params: {'code': code});\n  // 또는 members insert: from('members').insert({'user_id': uid,'group_id': gid})\n- cold/warm start 모두 처리, 실패 시 안내/재시도 제공.",
        "testStrategy": "- 링크 파싱 유닛 테스트(유효/무효/누락 코드).\n- 앱 실행 중/비실행 상태 모두 링크 처리 수동 검증.\n- RPC 실패/중복 가입 예외 처리 확인.",
        "priority": "medium",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "딥링크 포맷 통일 및 초대 링크 생성/공유 훅 구현",
            "description": "초대 링크 스킴을 splitbills://invite?code= 로 통일하고, 링크 생성 함수와 공유(share_plus) 액션을 추가합니다. 기존 tricount 스킴은 하위 호환 처리합니다.",
            "dependencies": [],
            "details": "- Android IntentFilter, iOS URL Types에 스킴 splitbills와 호스트 invite를 등록합니다. - 초대 코드로 splitbills://invite?code={code} URL을 생성하는 유틸/서비스 메서드를 추가 또는 기존 getInviteLink를 수정합니다. - 그룹 화면에 ‘초대 공유’ 버튼을 배치하고 share_plus로 링크를 공유합니다. - 기존 tricount://group/join?code= 링크는 생성 중지하되, 수신 시에도 처리될 수 있도록 파서에서 임시 대응합니다.",
            "status": "done",
            "testStrategy": "- 링크 문자열 생성 단위 테스트: 유효 코드 → 기대 URL 일치 확인. - Android/iOS에서 실제 공유 호출 시 예외 없이 동작 수동 확인. - 기존 tricount 스킴 입력 시 생성되지 않음을 확인.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "앱 초기/런타임 딥링크 수신·파싱 및 자동 가입 RPC 처리",
            "description": "uni_links 기반으로 getInitialLink와 linkStream을 처리하고, code 파싱 후 Supabase RPC(rpc_create_invite)로 자동 가입을 수행합니다.",
            "dependencies": [
              1
            ],
            "details": "- DeepLink 처리 모듈/서비스를 만들고 앱 시작(getInitialLink)과 실행 중(linkStream) 모두 구독합니다. - Uri.parse로 code를 추출하고 splitbills 스킴과 /invite 경로를 우선 처리, 기존 tricount 포맷은 임시 변환합니다. - 인증 미완료 상태면 큐에 보관 후 로그인 완료 이벤트 시 재처리합니다. - 중복 호출 방지를 위해 동일 링크 재실행 락/디바운스 적용 및 예외 로깅을 추가합니다. - 성공 시 RPC 응답의 group 식별자를 받아 라우팅용 이벤트를 발행합니다.",
            "status": "done",
            "testStrategy": "- 링크 파서 유닛 테스트: 정상/누락/잘못된 스킴/기존 tricount 포맷. - 콜드 스타트(getInitialLink)와 웜 스타트(linkStream) 시나리오 모킹 테스트. - RPC 성공/실패/중복 가입 에러 모킹으로 분기 검증.",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "가입 실패/중복 UX 정리 및 성공 리다이렉트·재시도·로깅 구현",
            "description": "자동 가입 실패/중복 케이스에 대한 사용자 메시지, 재시도 버튼, 성공 시 그룹 화면 리다이렉트 정책을 정의하고 구현합니다.",
            "dependencies": [
              1,
              2
            ],
            "details": "- RPC 에러 코드를 사용자 친화 메시지(만료 코드, 권한 없음, 네트워크 오류, 이미 가입 등)로 매핑해 SnackBar/Dialog로 노출합니다. - 재시도 액션을 제공하고, 네비게이션은 성공 시 GroupPage로 이동하면서 백스택 정리 정책을 문서화/적용합니다. - 처리 결과를 로깅(디버그/선택적 Crashlytics)하고, 텔레메트리 이벤트 키를 표준화합니다. - 동일 링크 재처리 방지를 위한 완료 상태 표시 및 UX 피드백(로딩 인디케이터/완료 토스트)을 제공합니다.",
            "status": "done",
            "testStrategy": "- 위젯 테스트: 실패 시 다이얼로그/스낵바 노출과 재시도 액션 동작. - 중복 가입 에러 모킹 시 안내 메시지와 리다이렉트 미발생 확인. - 성공 시 GroupPage로 이동 및 백스택 정책 수동 검증.",
            "parentId": "undefined"
          }
        ],
        "complexity": 3,
        "recommendedSubtasks": 3,
        "expansionPrompt": "1) 초대 링크 포맷 통일(요구 splitbills://invite?code= vs 현재 tricount://group/join?code=) 및 공유 훅 추가(share_plus), 2) app_links 기반 초기/런타임 링크 파싱 재검증, 3) 가입 실패/중복 UX와 리다이렉트 정책 정리.",
        "updatedAt": "2025-11-07T04:43:06.961Z"
      },
      {
        "id": "6",
        "title": "지출 등록/수정(분담비 포함) 구현",
        "description": "ExpensePage에서 날짜, 금액, 통화, 부담자, 참가자, 분담 비율 입력 및 저장(update 포함)을 구현합니다.",
        "details": "- Equal split 토글→참가자 수로 균등 분배, 커스텀 모드에서 비율 합=1.0 검증.\n- 환율 표시는 그룹 base_currency 기준으로 환산 표시(표시는 rates 사용). DB 저장은 원화/선택 통화와 participants 배열.\n- 의사코드:\n  final total = amount; final ratios = {uid1:0.5, uid2:0.5}; assert((ratios.values.reduce((a,b)=>a+b) - 1.0).abs() < 1e-6);\n  await client.from('expenses').insert({ 'group_id': gid, 'payer_id': uidPayer, 'amount': amount, 'currency': cur, 'description': desc, 'date': date.toIso8601String(), 'participants': ratios.entries.map((e)=>{'user_id':e.key,'ratio':e.value}).toList(), });",
        "testStrategy": "- 폼 검증(금액>0, 참가자≥2, 비율합=1) 위젯/단위 테스트.\n- 저장 성공 후 GroupPage 목록 즉시 갱신 확인.\n- 환율 누락 시 표시 폴백 동작 확인.",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 8,
        "recommendedSubtasks": 10,
        "expansionPrompt": "1) ExpensePage 폼(날짜/금액/통화/부담자/참가자/메모), 2) Equal split/커스텀 비율 편집기와 합=1.0 검증, 3) participants 배열 직렬화/역직렬화, 4) 환율 표시 유틸(그룹 base_currency 기준 환산) 및 폴백, 5) insert/update API와 optimistic 갱신, 6) 그룹 상세 리스트 반영/캐시 무효화, 7) 부동소수점/반올림 규칙, 8) 접근성/키보드 UX, 9) 단위/위젯 테스트, 10) 오류/권한 가드."
      },
      {
        "id": "7",
        "title": "정산 계산(Supabase Function) 연동",
        "description": "최소 송금 계산을 RPC로 호출해 미리보기/확정 저장을 구현합니다.",
        "details": "- RPC 계약: rpc_calculate_minimum_transfers(group_id) → [{from_user,to_user,amount}] 반환 가정.\n- UI: GroupPage ‘정산 계산’ 버튼→미리보기 다이얼로그→확정 시 settlements insert.\n- 의사코드:\n  final rows = await client.rpc('rpc_calculate_minimum_transfers', params:{'group_id': gid});\n  setState(()=>preview = rows);\n  // Confirm\n  await client.from('settlements').insert(rows.map((r)=>{...}).toList());",
        "testStrategy": "- 빈 결과/에러 처리.\n- 금액 반올림 표기 검증.\n- 동일 관계 상쇄(양방향 발생 시) 미리보기 검증(목업).",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 6,
        "recommendedSubtasks": 6,
        "expansionPrompt": "1) RPC 클라이언트 래퍼와 타입 매핑, 2) GroupPage ‘정산 계산’ 버튼/미리보기 다이얼로그, 3) 반올림/표시 규칙, 4) 확정 시 settlements insert 트랜잭션 처리, 5) 빈/에러/양방향 상쇄 처리, 6) 모킹 기반 단위 테스트."
      },
      {
        "id": "8",
        "title": "정산 상태 실시간 추적 및 요청 화면군",
        "description": "Supabase Realtime 구독으로 settlements 상태를 실시간 반영하고 RequestRegister/List/Detail 화면에서 상태 전이를 제공합니다.",
        "details": "- settlements 테이블에 status(pending/paid/rejected/rolled_back) 가정.\n- Realtime 구독 의사코드:\n  final ch = supabase.channel('public:settlements').on(PostgresChangeEvent.update, ChannelFilter(table:'settlements',schema:'public',filter:'group_id=eq.$gid'), (payload){ setState(()=>applyChange(payload)); }).subscribe();\n- RequestRegisterPage: 계산 결과로 pending 생성.\n- RequestListPage: 상태 필터 탭.\n- RequestPage: paid/rejected/rolled_back 업데이트와 롤백 처리.",
        "testStrategy": "- 상태 전이 단위 테스트(pending→paid/rejected→rolled_back).\n- 구독 해제/재구독 시 메모리 누수 없음을 확인.\n- 오프라인 후 재연결 시 동기화 확인(재조회 트리거).",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 6,
        "recommendedSubtasks": 7,
        "expansionPrompt": "1) Supabase Realtime 구독 채널 구성/해제, 2) RequestListTab/RequestPage에 실시간 반영(캐시 병합), 3) 상태 전이(pending→paid|rejected|rolled_back) 맵핑과 현재 enum(completed/declined) 정렬, 4) 오프라인 재연결 시 재조회, 5) 메모리 누수/수명주기 가드, 6) 에러 리트라이/토스트, 7) 위젯 테스트(상태 전이)."
      },
      {
        "id": "9",
        "title": "송금 액션(플레이스홀더) 및 계좌 복사",
        "description": "실제 결제 연동 전까지 계좌 복사/외부 앱 열기 동작과 향후 결제 API 인터페이스를 준비합니다.",
        "details": "- PaymentProvider 인터페이스 정의: pay(Settlement s) → Future<PaymentResult>.\n- Kakao/Toss 스텁 구현(미사용, 훅만 노출).\n- RequestPage ‘송금하기’: Clipboard.setData(bankAccount) + launchUrl(카카오/토스 스킴) 시도.\n- 실패 시 안내 및 수동 paid 처리 버튼 유지.",
        "testStrategy": "- URL 스킴 실패 예외 처리 경로 확인.\n- 클립보드 복사 토스트 표시 테스트.\n- Provider 스텁 모킹 컴파일 안정성 확인.",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 4,
        "recommendedSubtasks": 4,
        "expansionPrompt": "1) PaymentProvider 인터페이스/결과 타입 정의, 2) 카카오/토스 URL 스킴 런처 스텁, 3) RequestPage에 ‘송금하기’ 액션 추가(Clipboard+launchUrl), 4) 실패 시 안내 및 수동 완료 처리 버튼 유지/가드."
      },
      {
        "id": "10",
        "title": "프로필/계좌 관리(User Metadata) 및 포맷팅",
        "description": "ProfilePage에서 실명/닉네임/계좌 정보를 Supabase Auth user_metadata로 저장/로드하고 통화/날짜 포맷 일관성을 적용합니다.",
        "details": "- Supabase Auth 업데이트:\n  await supabase.auth.updateUser(UserAttributes(data:{'real_name':name,'nickname':nick,'bank_account':account}));\n- 표시 시 일부 마스킹 처리.\n- 통화/날짜 포맷: intl NumberFormat.currency, DateFormat.yMMMd 지역화 반영.\n- RequestPage에서 수신자 계좌 표시 연동.",
        "testStrategy": "- 저장 후 재진입 값 복원 테스트.\n- 누락/부분 입력 시 검증 메시지 확인.\n- RequestPage에 계좌 표시 및 마스킹 렌더링 확인.",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": [],
        "complexity": 5,
        "recommendedSubtasks": 6,
        "expansionPrompt": "1) Supabase Auth user_metadata 로드/저장 유틸 추가, 2) 기존 users 테이블 업데이트와 메타데이터 병행/이행 전략, 3) 계좌 표시 마스킹/복사 UX 정리, 4) intl 통화/날짜 포맷 유틸 공통화, 5) RequestPage 수신자 계좌 표시 연동, 6) 저장 후 재진입 복원/유효성 검증 테스트."
      },
      {
        "id": "11",
        "title": "Clean Architecture 리팩토링: 레이어/리포지토리/유즈케이스/에러/공통 컴포넌트",
        "description": "현 구조(lib/main.dart의 딥링크/인증 콜백 과도 집중, common/services의 직접 Supabase 접근)를 Clean Architecture로 재구성합니다. 레이어 분리, 리포지토리/유즈케이스 도입, 에러 처리 통일, 공통 컴포넌트/유틸리티 구축 및 Provider 정의 분리를 수행합니다.",
        "details": "현황 분석(코드 기준)\n- 딥링크/인증: lib/main.dart 내 MyAppState에서 AppLinks + 인증 콜백을 직접 처리(딥링크 파싱/분기/네비게이션 포함).\n- 서비스: lib/common/services/*(auth_service.dart, group_service.dart, request_service.dart, ...)에서 SupabaseClient를 직접 사용하며 Provider를 파일 하단에 정의.\n- 라우팅: lib/app_router.dart(go_router), 하단 탭: lib/features/home/home_page.dart(IndexedStack + NavigationBar).\n- 환경: lib/config/environment.dart에서 .env 로드 및 Supabase Redirect URI 조립.\n\n목표 구조(새 디렉터리/파일)\n- core(플랫폼 독립/공통):\n  - lib/core/errors/app_error.dart(AppError, AppErrorCode, toFriendlyMessage)\n  - lib/core/result/result.dart(Result<T>, Success/Failure)\n  - lib/core/deeplink/deep_link_handler.dart(딥링크 파서/분기/콜백 인터페이스)\n  - lib/core/auth/auth_callback_handler.dart(OAuth 콜백 처리기)\n  - lib/core/di/providers.dart(공용 Provider 집약: SupabaseClient, Repositories, UseCases)\n- domain(비즈니스 규칙):\n  - lib/domain/repositories/*.dart(GroupRepository, RequestRepository, AuthRepository 등 인터페이스)\n  - lib/domain/usecases/*.dart(JoinGroupByInviteCodeUseCase, GetUserGroupsUseCase, FetchRequestsUseCase, UpdateRequestStatusUseCase 등)\n- data(외부 연동 구현):\n  - lib/data/repositories/*_repository_impl.dart(Supabase 기반 구현: 기존 Service 대체)\n- presentation(선택적):\n  - lib/presentation/widgets/common_snackbar.dart, async_value_extensions.dart(공통 UI/유틸)\n\n구현 단계\n1) 에러 처리 통일(core/errors, core/result)\n- app_error.dart: AppErrorCode(enum: network, auth, permission, notFound, invalidLink, conflict, unknown), AppError(code, message, cause) + toFriendlyMessage(Locale?)\n- result.dart: sealed-like Result<T> = Success<T>(value) | Failure<T>(AppError)\n- 변환 규칙: SupabaseException/http 오류/FormatException → AppError 매핑 함수\n\n2) 리포지토리 인터페이스(domain/repositories)\n- group_repository.dart: createGroup(name, baseCurrency), joinByInviteCode(code), getUserGroups(), getGroupDetail(id), getGroupMembers(id)\n- request_repository.dart: fetchRequests(userId, status?), fetchRequest(id), createRequest(...), updateStatus(id, status)\n- auth_repository.dart(경량): signIn(provider), signOut(), syncUserProfile()\n\n3) 리포지토리 구현(data/repositories)\n- group_repository_impl.dart: 기존 lib/common/services/group_service.dart 로직을 이동/재사용하되 Result<AppError> 반환으로 래핑. SupabaseClient 주입.\n- request_repository_impl.dart: 기존 request_service.dart 이동/재사용, Result 기반 반환으로 일원화.\n- auth_repository_impl.dart: 기존 auth_service.dart 로그인/로그아웃/프로필 동기화 래핑.\n- 마이그레이션 전략: 1차는 기존 Service를 내부적으로 호출하는 어댑터를 제공해 UI 변경 영향 최소화(점진적 교체). 예) GroupRepositoryImpl이 내부 private GroupService를 사용하고, 예외→AppError 변환.\n\n4) 유즈케이스(domain/usecases)\n- JoinGroupByInviteCodeUseCase(GroupRepository)\n- GetUserGroupsUseCase(GroupRepository)\n- FetchRequestsUseCase(RequestRepository)\n- UpdateRequestStatusUseCase(RequestRepository)\n- 각 유즈케이스는 call(...) → Future<Result<T>> 형태로 구현\n\n5) Provider 정의 분리(core/di/providers.dart)\n- supabaseClientProvider(Supabase.instance.client)\n- 각 Repository Provider: groupRepositoryProvider, requestRepositoryProvider, authRepositoryProvider\n- 각 UseCase Provider: joinGroupByInviteCodeUseCaseProvider 등\n- 기존 서비스 파일 하단 Provider는 deprecated 주석 후 providers.dart로 위임/재노출(단계적 제거).\n\n6) 딥링크/인증 로직 분리(main.dart 경량화)\n- core/deeplink/deep_link_handler.dart: parseHomeTabUri/maybeParseInviteCode/isGroupInviteUri 등 기존 main.dart 로직 이동. handle(Uri) → Future<void>로 설계하여 네비게이션·스낵바는 콜백(예: onNavigate(String route), onToast(String))으로 주입.\n- core/auth/auth_callback_handler.dart: _isSupportedAuthCallback, callback 처리 및 AuthRepository 연동으로 리팩터링.\n- main.dart: MyAppState에서는 AppLinks 구독만 담당. onUri 수신 시 AuthCallbackHandler → DeepLinkHandler 순서로 처리. 네비게이션은 appRouter.go를 넘기는 onNavigate로 주입. 기존 _safeNavigate/_showDeepLinkMessage는 공통 util로 대체.\n- app_router.dart는 변경 최소화(라우트 path 그대로 유지).\n\n7) 공통 컴포넌트/유틸리티\n- presentation/widgets/common_snackbar.dart: showInfo(context, msg), showError(context, msg)\n- common/utils/format.dart(또는 presentation/utils): 통화/날짜 포맷 래퍼(intl 사용) — 기존 요구와 합치되나, 현 pubspec에 codegen 도구 없음 → 경량 함수로 구현\n- riverpod AsyncValue UI 확장: AsyncValue<T>.onSuccess/OnError 헬퍼(선택)\n\n8) UI 적용 최소 변경 포인트\n- features/home/home_page.dart: FAB에서 requestListProvider 사용 중 → providers.dart에서 request 관련 usecase 기반 Provider를 노출하는 어댑터 추가(requestListProvider 유지하되 내부 구현만 교체)\n- features/group/group_page.dart, features/requests/*: 동일 전략으로 기존 Provider 유지 + 내부 의존을 Repository/UseCase로 천천히 전환\n\n파일 단위 가이드(핵심 예)\n- lib/main.dart: MyAppState._listenToDeepLinks/_handleDeepLink/_handleGroupInvite/_handleHomeTabLink/_isSupportedAuthCallback → 각각 DeepLinkHandler/AuthCallbackHandler로 이동. MyApp은 ProviderScope에서 handler를 읽어 콜백만 연결.\n- lib/common/services/group_service.dart, request_service.dart, auth_service.dart: 로직은 data/repositories/*_impl.dart로 이동 후 여기서는 @Deprecated 주석 + 새 Provider 재노출만 유지(중간 호환층).\n- lib/app_router.dart, lib/config/environment.dart: 변경 없음(경로/환경 유지).\n\n리스크/마이그레이션\n- 대규모 이동으로 import 경로 변경 다수 발생 가능 → 1차 릴리스에서는 Service→Repository 어댑터 병행으로 컴파일 안정성 우선.\n- 코드젠 라이브러리(freezed/json_serializable) 미사용(현 pubspec에 미포함). 추후 별도 태스크로 도입.\n",
        "testStrategy": "정적 점검\n- flutter analyze 무경고 확인(임시 @Deprecated 허용).\n- 모든 새/이동 파일이 올바른 import를 사용하고 순환 참조가 없는지 확인.\n\n부팅/네비게이션\n- 앱 부팅 후 /splash → /home 라우팅 정상 동작.\n- 로그인 전 splitbills://invite?code=TEST 링크 수신 시 /auth로 이동하고 토스트 노출.\n- 로그인 후 동일 링크 수신 시 그룹 가입 성공 → /groups/:id로 이동.\n\n인증 콜백\n- tricount://auth/google?state=... 형식 콜백을 AuthCallbackHandler로 전달 시 세션 생성/프로필 동기화 호출 경로가 실행되고 Result 성공 시 홈으로 이동.\n- 실패/예외(FormatException, 네트워크) 시 AppError 매핑 및 사용자 친화 메시지 스낵바 표시.\n\n리포지토리/유즈케이스\n- userGroups 조회: Home 진입 시 기존 userGroupsProvider가 정상 데이터 수신(내부 구현이 repository 기반으로 전환됨을 확인).\n- 요청 목록: Requests 탭에서 상태 필터 시 정상 목록/에러 메시지 노출 확인.\n- 상태 업데이트: RequestPage에서 updateStatus 호출 시 성공/실패 경로 각각 스낵바/토스트 확인.\n\n회귀 확인\n- Group 생성/초대 링크 생성 기능 기존과 동일 동작.\n- 기존 services Provider를 사용하는 화면이 모두 컴파일/런타임 정상(어댑터 유지로 보장).",
        "status": "done",
        "dependencies": [
          "1"
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "공통 컴포넌트 생성",
            "description": "ErrorView, LoadingView, EmptyStateView, InfoRow 위젯 생성 및 기존 중복 코드 제거",
            "details": "- lib/presentation/widgets/common/error_view.dart: 에러 표시 위젯 (현재 _GroupErrorView 등 중복 제거)\n- lib/presentation/widgets/common/loading_view.dart: 로딩 표시 위젯\n- lib/presentation/widgets/common/empty_state_view.dart: 빈 상태 표시 위젯\n- lib/presentation/widgets/common/info_row.dart: 정보 행 표시 위젯 (현재 _InfoRow 중복 제거)\n- 기존 코드에서 중복된 위젯을 새 공통 컴포넌트로 교체",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "유틸리티 함수 생성",
            "description": "date_formatter, snackbar_helper, clipboard_helper, share_helper, currency_formatter 생성",
            "details": "- lib/core/utils/date_formatter.dart: 날짜 포맷팅 (현재 여러 곳에 중복)\n- lib/core/utils/snackbar_helper.dart: SnackBar 표시 헬퍼\n- lib/core/utils/clipboard_helper.dart: 클립보드 복사 헬퍼\n- lib/core/utils/share_helper.dart: 공유 기능 헬퍼\n- lib/core/utils/currency_formatter.dart: 통화 포맷팅\n- 기존 코드에서 중복된 유틸리티 로직을 새 헬퍼로 교체",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "상수 정의",
            "description": "app_constants, route_constants, currency_constants 파일 생성 및 하드코딩된 값 제거",
            "details": "- lib/core/constants/app_constants.dart: 앱 전역 상수\n- lib/core/constants/route_constants.dart: 라우트 경로 상수\n- lib/core/constants/currency_constants.dart: 통화 목록 상수 (현재 GroupCreatePage에 하드코딩)\n- 기존 코드에서 하드코딩된 값들을 상수로 교체\n<info added on 2025-11-07T16:17:59.041Z>\n구현 완료 사항\n- 상수 파일 생성 및 배럴 추가\n  - lib/core/constants/route_constants.dart: splash/auth/home/groupCreate/requestRegister 및 OAuth 콜백 경로 정의, 상세 경로 빌더(groupDetail(id), requestDetail(id)) 제공\n  - lib/core/constants/currency_constants.dart: 지원 통화 목록(KRW, USD, EUR, JPY, CNY, GBP) 및 기본 통화(KRW) 정의\n  - lib/core/constants/app_constants.dart: 그룹 이름 최대/최소 길이, 기본/대/소 패딩, 네트워크 타임아웃, 딥링크 스킴/호스트/파라미터 상수 정의\n  - lib/core/constants/constants.dart: 위 상수 일괄 export\n\n- 기존 코드 교체 적용\n  - lib/features/group/group_create_page.dart\n    - 통화 드롭다운 항목: CurrencyConstants.supportedCurrencies 사용\n    - 기본 통화: CurrencyConstants.defaultCurrency 사용\n    - 그룹명 검증: AppConstants.maxGroupNameLength 사용\n    - 라우팅: context.go(RouteConstants.home)로 변경\n    - import 정리: core/constants/constants.dart 배럴 사용\n  - lib/features/group/group_page.dart\n    - 기본 통화 fallback: CurrencyConstants.defaultCurrency 사용\n    - import 정리: core/constants/constants.dart 배럴 사용\n  - lib/app_router.dart\n    - 초기 경로 및 정적 경로: RouteConstants.splash/auth/home/groupCreate/requestRegister/authKakao/authGoogle/authApple 사용\n    - 상세 경로 이동 시 사용을 위한 RouteConstants.groupDetail()/requestDetail() 제공\n\n린트\n- import 정리 및 const 사용 경고 해결, flutter analyze 무경고 유지\n\n추가 제안(후속)\n- 라우터의 상세 경로 패턴('/groups/:id', '/requests/:id')도 상수로 관리하기 위해 RouteConstants에 groupDetailPattern, requestDetailPattern 추가 후 app_router.dart의 path 지정부 교체\n</info added on 2025-11-07T16:17:59.041Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined"
          },
          {
            "id": 4,
            "title": "Provider 분리",
            "description": "각 서비스 파일에서 Provider 정의를 presentation/providers/ 디렉토리로 분리",
            "details": "- lib/presentation/providers/auth_providers.dart: authServiceProvider 등\n- lib/presentation/providers/group_providers.dart: groupServiceProvider, userGroupsProvider 등\n- lib/presentation/providers/request_providers.dart: requestServiceProvider, requestListProvider 등\n- lib/presentation/providers/profile_providers.dart: profileServiceProvider 등\n- lib/presentation/providers/bank_account_providers.dart: bankAccountServiceProvider 등\n- 기존 서비스 파일에서 Provider 정의 제거하고 새 파일로 이동\n<info added on 2025-11-07T16:23:40.279Z>\nProvider 분리 및 배럴 구성 완료\n- 생성 파일 및 Provider:\n  - lib/presentation/providers/group_providers.dart: groupDetailProvider, groupMembersProvider 추가\n  - lib/presentation/providers/request_providers.dart: requestDetailProvider 추가\n  - lib/presentation/providers/providers.dart: 배럴 파일 생성 및 모든 Provider export\n\n서비스 파일에서 Provider 및 flutter_riverpod 의존 제거 완료\n- lib/common/services/auth_service.dart\n- lib/common/services/group_service.dart\n- lib/common/services/request_service.dart\n- lib/common/services/profile_service.dart\n- lib/common/services/bank_account_service.dart\n\n기존 코드 import 정리\n- Provider 사용처를 배럴 파일로 통일\n  - lib/features/auth/auth_page.dart:8 → ../../presentation/providers/providers.dart\n  - lib/features/group/group_create_page.dart:7 → ../../presentation/providers/providers.dart\n  - lib/features/requests/request_register_page.dart:8 → ../../presentation/providers/providers.dart\n  - lib/features/requests/request_list_tab.dart:11 → ../../presentation/providers/providers.dart\n  - lib/features/profile/profile_page.dart:11 → ../../presentation/providers/providers.dart\n- 서비스 클래스의 정적 메서드 직접 사용은 유지 (예: AuthService.clearAuthError)\n\n품질\n- flutter analyze 기준 린트 경고/에러 0 확인\n</info added on 2025-11-07T16:23:40.279Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined"
          },
          {
            "id": 5,
            "title": "에러 처리 통일",
            "description": "커스텀 Exception 클래스 및 error_handler 생성, 서비스 레이어에 적용",
            "details": "- lib/core/errors/app_exception.dart: AppException, NetworkException, AuthException 등 커스텀 Exception 클래스 정의\n- lib/core/errors/error_handler.dart: 통일된 에러 처리 로직\n- 서비스에서 Error.throwWithStackTrace 대신 커스텀 Exception 사용\n- 에러 메시지를 사용자 친화적인 메시지로 변환하는 로직 포함\n<info added on 2025-11-07T16:29:29.108Z>\n에러 처리 통일 완료 사항 반영\n\n생성 파일\n- lib/core/errors/app_exception.dart: AppException, NetworkException, AuthException, PermissionException, NotFoundException, ValidationException, ConflictException, UnknownException 정의\n- lib/core/errors/error_handler.dart: ErrorHandler(toAppException, toUserFriendlyMessage, handleAndLog) 구현. gotrue.AuthException 자동 변환, PostgrestException 코드 분기(PGRST116=NotFound, 23505=Conflict, 23503=Validation, 42501=Permission), StorageException→NetworkException 처리, 네트워크 키워드 기반 휴리스틱, kDebugMode 상세 로깅\n- lib/core/errors/errors.dart: 에러 관련 배럴 파일(export)\n\n서비스 적용(모두 errors.dart 배럴 import)\n- lib/common/services/auth_service.dart: 모든 catch에서 ErrorHandler.handleAndLog 사용, UnknownException 사용, 컨텍스트 메시지 추가(OAuth 로그인 실패(provider), 로그아웃 실패, 사용자 프로필 동기화 실패)\n- lib/common/services/group_service.dart: Error.throwWithStackTrace 제거, handleAndLog로 통일, 명시적 AppException 사용(AuthException ‘로그인이 필요합니다’, ValidationException ‘유효하지 않은 초대 코드입니다’, NotFoundException ‘그룹을 찾을 수 없습니다’), 컨텍스트 메시지 추가(그룹 생성/가입/멤버 조회/상세 조회/삭제/초대 링크 생성 실패)\n- lib/common/services/request_service.dart: 요청 목록/상세/생성/상태 변경 전체에 handleAndLog 적용, 컨텍스트 메시지 추가\n- lib/common/services/bank_account_service.dart: 조회/추가/삭제 전체에 handleAndLog 적용, 컨텍스트 메시지 추가\n- lib/common/services/profile_service.dart: 프로필 조회/이름·닉네임 업데이트에 handleAndLog 적용, 컨텍스트 메시지 추가\n\n에러 처리 기능 요약\n- Supabase 예외 자동 변환: gotrue.AuthException, PostgrestException, StorageException\n- HTTP/DB 에러코드 및 메시지 기반 분류: 인증/권한/유효성/중복/미발견/네트워크/알 수 없음\n- 사용자 친화적 메시지 변환 메서드 제공(ErrorHandler.toUserFriendlyMessage)\n- 디버그 모드 상세 로깅(kDebugMode, context/cause/stackTrace 포함)\n\n정리\n- Error.throwWithStackTrace 전면 제거, ErrorHandler.handleAndLog로 대체\n- ‘로그인이 필요합니다’→AuthException, ‘그룹을 찾을 수 없습니다’→NotFoundException, ‘유효하지 않은 초대 코드입니다’→ValidationException로 표준화\n- flutter analyze 기준 린트 경고/오류 모두 해소\n</info added on 2025-11-07T16:29:29.108Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined"
          },
          {
            "id": 6,
            "title": "Repository 패턴 도입",
            "description": "domain/repositories 인터페이스 정의 및 data/repositories 구현체 생성",
            "details": "- lib/domain/repositories/ 디렉토리에 Repository 인터페이스 정의\n  - group_repository.dart\n  - request_repository.dart\n  - auth_repository.dart\n  - profile_repository.dart\n  - bank_account_repository.dart\n- lib/data/repositories/ 디렉토리에 Supabase 기반 구현체 생성\n- 기존 서비스 로직을 Repository 구현체로 이동\n- 서비스는 Repository를 통해 데이터 접근하도록 변경\n<info added on 2025-11-07T20:13:05.867Z>\nRepository 패턴 도입 완료\n\n생성된 파일\n- lib/domain/repositories/\n  - group_repository.dart: GroupRepository 인터페이스 정의\n  - request_repository.dart: RequestRepository 인터페이스 정의\n  - auth_repository.dart: AuthRepository 인터페이스 정의\n  - profile_repository.dart: ProfileRepository 인터페이스 정의\n  - bank_account_repository.dart: BankAccountRepository 인터페이스 정의\n  - repositories.dart: 배럴 파일(export)\n- lib/data/repositories/\n  - group_repository_impl.dart: GroupRepositoryImpl(기존 GroupService 로직 이관)\n  - request_repository_impl.dart: RequestRepositoryImpl(기존 RequestService 로직 이관)\n  - auth_repository_impl.dart: AuthRepositoryImpl(기존 AuthService 로직 이관)\n  - profile_repository_impl.dart: ProfileRepositoryImpl(기존 ProfileService 로직 이관)\n  - bank_account_repository_impl.dart: BankAccountRepositoryImpl(기존 BankAccountService 로직 이관)\n  - repositories.dart: 배럴 파일(export)\n\n서비스 리팩토링\n- 모든 서비스가 Repository 의존성 주입(생성자) 방식으로 변경\n- 하위 호환을 위해 fromClient(SupabaseClient client) 팩토리 추가\n  - fromClient 내부에서 대응하는 RepositoryImpl로 감싸서 생성\n- 서비스의 공개 메서드는 내부적으로 Repository 메서드로 위임\n\nProvider 업데이트\n- 기존 Provider 명/시그니처 유지\n- Provider 생성 시 Service.fromClient(Supabase.instance.client) 사용으로 통일\n- 파일 레퍼런스(서비스별 Provider 포함): \n  - lib/common/services/auth_service.dart\n  - lib/common/services/group_service.dart\n  - lib/common/services/request_service.dart\n  - lib/common/services/profile_service.dart\n  - lib/common/services/bank_account_service.dart\n\n배럴/임포트 규칙\n- lib/domain/repositories/repositories.dart 에서 모든 인터페이스 export\n- lib/data/repositories/repositories.dart 에서 모든 구현체 export\n- 서비스/Provider 내 임포트 예시:\n  - import 'package:…/domain/repositories/repositories.dart';\n  - import 'package:…/data/repositories/repositories.dart';\n\n품질/검증\n- flutter analyze 무경고 상태 확인\n- 순환 의존성 없음(서비스→도메인 인터페이스, 구현은 data 레이어에만 위치)\n- 기존 API/Provider 외부 계약은 변경 없음(내부 구현만 Repository로 대체)\n\n마이그레이션 노트\n- 서비스 파일에서 직접 SupabaseClient 접근 코드 제거\n- 예: client.from('groups')… 호출부 → GroupRepository로 위임\n- 페이지/위젯 레벨 로직 변경 불필요(서비스 API 유지)\n\n후속 작업 연결\n- UseCase 레이어에서 도메인 Repository 인터페이스를 직접 의존하도록 설계 예정(11.7 연계)\n</info added on 2025-11-07T20:13:05.867Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined"
          },
          {
            "id": 7,
            "title": "UseCase 도입",
            "description": "domain/usecases 디렉토리에 비즈니스 로직 UseCase 클래스 생성",
            "details": "- lib/domain/usecases/ 디렉토리 생성\n- 비즈니스 로직을 UseCase 클래스로 캡슐화\n- 예: CreateGroupUseCase, JoinGroupUseCase, CreateRequestUseCase, UpdateRequestStatusUseCase 등\n- UseCase는 Repository를 의존성으로 받아 사용\n- 프레젠테이션 레이어는 UseCase를 통해 비즈니스 로직 호출",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined",
            "updatedAt": "2025-11-07T20:56:25.933Z"
          },
          {
            "id": 8,
            "title": "main.dart 리팩토링",
            "description": "딥링크 처리, 인증 콜백, 초대 코드 처리를 별도 핸들러로 분리",
            "details": "- lib/core/deep_link/deep_link_handler.dart: 딥링크 처리 로직 분리\n- lib/core/auth/auth_callback_handler.dart: 인증 콜백 처리 로직 분리\n- lib/core/invite/invite_handler.dart: 초대 코드 처리 로직 분리\n- main.dart는 앱 초기화와 라우팅만 담당하도록 경량화\n- 기존 700+ 라인의 로직을 각 핸들러로 분산",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined",
            "updatedAt": "2025-11-07T20:56:25.939Z"
          },
          {
            "id": 9,
            "title": "기존 코드 마이그레이션",
            "description": "모든 기존 코드를 새 구조와 공통 컴포넌트를 사용하도록 업데이트",
            "details": "- lib/features/group/group_page.dart: 공통 컴포넌트(ErrorView, InfoRow 등) 사용\n- lib/features/home/groups_tab.dart: 공통 컴포넌트 사용\n- lib/features/group/group_create_page.dart: 상수 사용\n- lib/common/services/*.dart: Repository 패턴 적용\n- 모든 위젯에서 중복 코드 제거 및 공통 컴포넌트/유틸리티 사용\n- import 경로 업데이트",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11,
            "parentId": "undefined",
            "updatedAt": "2025-11-07T20:56:25.942Z"
          }
        ],
        "updatedAt": "2025-11-07T20:56:25.942Z"
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2025-11-07T20:56:25.942Z",
      "taskCount": 11,
      "completedCount": 3,
      "tags": [
        "master"
      ]
    }
  }
}